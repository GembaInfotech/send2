{"version":3,"file":"static/js/0.22beb1f2.chunk.js","mappings":"+KAKA,MAuGA,EArGoBA,KAClB,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,GACjCC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEXC,EAAe,IAAIC,gBAAgBH,EAASI,QAC5CC,EAAcH,EAAaI,IAAI,QAC/BC,EAAeL,EAAaI,IAAI,SAChCE,EAAQR,EAASS,MAAQT,EAASS,MAAQF,GAEzCG,EAAMC,IAAWd,EAAAA,EAAAA,UAASQ,GAA4B,KACtDO,EAAOC,IAAYhB,EAAAA,EAAAA,UAAS,IAM7BiB,GAAeC,EAAAA,EAAAA,cAAY,KAC/BnB,GAAW,GACX,MAAMoB,EAAgB,0CAAAC,OAA6CP,EAAI,WAAAO,OAAUT,GACjFU,EAAAA,EACGZ,IAAIU,GACJG,MAAMC,IACc,MAAfA,EAAIC,SACNvB,EAAS,mBACTa,EAAQ,IACRE,EAAS,IACTjB,GAAW,GACb,IAED0B,OAAOC,IACNV,EACEU,EAAIC,SAASC,KAAKC,SAAW,mCAG/B9B,GAAW,EAAM,GACjB,GACH,CAACc,EAAMF,EAAOV,EAAUF,EAAYiB,IAavC,OAXAc,EAAAA,EAAAA,YAAU,KAEJtB,GAAeE,GACjBO,GACF,GACC,CAACT,EAAaE,EAAcO,IAEjB,8BAAVF,GACFd,EAAS,YAIT8B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qCAAoCC,UACjDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gDAA+CC,UAC5DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBC,SAAC,+BAEtCzB,IAAgBE,IAChBwB,EAAAA,EAAAA,MAAA,KAAGF,UAAU,OAAMC,SAAA,CAAC,qEAElBF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,YAAWC,SAAC,aAAe,4BAE3CF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,YAAWC,SAAC,YAAc,sBAK9CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBF,EAAAA,EAAAA,KAAA,SACEI,KAAK,OACLC,YAAY,oBACZJ,UAAU,iDACVK,MAAOxB,EACPyB,SA3DcC,IACxBzB,EAAQyB,EAAEC,OAAOH,MAAM,MA6DhBtB,IAASgB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4BAA2BC,SAAElB,KACtDgB,EAAAA,EAAAA,KAAA,UACEU,SAAU3C,EACVkC,UAAU,gEACVU,QAASzB,EAAagB,SAErBnC,GACCiC,EAAAA,EAAAA,KAACY,EAAAA,EAAc,CAACC,YAAa,iBAE7B,YAGJb,EAAAA,EAAAA,KAAA,UACEC,UAAU,wEACVU,QAASA,KACPzC,EAAS,UAAU,EACnBgC,SACH,iBAKD,C","sources":["pages/VerifyEmail.jsx"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate, useLocation } from \"react-router\";\nimport axios from \"axios\";\nimport LoadingSpinner from \"../components/loader/ButtonLoadingSpinner\";\n\nconst BASE_URL = process.env.REACT_APP_API_URL;\n\nconst VerifyEmail = () => {\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const searchParams = new URLSearchParams(location.search);\n  const codeFromUrl = searchParams.get(\"code\");\n  const emailFromUrl = searchParams.get(\"email\");\n  const email = location.state ? location.state : emailFromUrl;\n\n  const [code, setCode] = useState(codeFromUrl ? codeFromUrl : \"\");\n  const [error, setError] = useState(\"\");\n\n  const handleCodeChange = (e) => {\n    setCode(e.target.value);\n  };\n\n  const handleVerify = useCallback(() => {\n    setLoading(true);\n    const verificationLink = `http://localhost:4005/auth/verify?code=${code}&email=${email}`;\n    axios\n      .get(verificationLink)\n      .then((res) => {\n        if (res.status === 200) {\n          navigate(\"/email-verified\");\n          setCode(\"\");\n          setError(\"\");\n          setLoading(false);\n        }\n      })\n      .catch((err) => {\n        setError(\n          err.response.data.message || \"Invalid code, please try again.\"\n        );\n\n        setLoading(false);\n      });\n  }, [code, email, navigate, setLoading, setError]);\n\n  useEffect(() => {\n    // Automatically trigger handleVerify if both code and email are present in the URL\n    if (codeFromUrl && emailFromUrl) {\n      handleVerify();\n    }\n  }, [codeFromUrl, emailFromUrl, handleVerify]);\n\n  if (error === \"Email is already verified\") {\n    navigate(\"/signin\");\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-10 overflow-y-auto\">\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <div className=\"rounded-md bg-white p-6 shadow-md\">\n          <h2 className=\"mb-4 text-2xl font-bold\">Verify your email address</h2>\n\n          {!codeFromUrl && !emailFromUrl && (\n            <p className=\"mb-4\">\n              A verification code was sent to your email address. Please either\n              <span className=\"font-bold\"> follow </span>\n              the link in the email or\n              <span className=\"font-bold\"> enter </span>\n              the code below.\n            </p>\n          )}\n\n          <div className=\"mb-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Verification code\"\n              className=\"w-full rounded-lg border-2 border-gray-200 p-2\"\n              value={code}\n              onChange={handleCodeChange}\n            />\n          </div>\n          {error && <div className=\"mb-4 text-sm text-red-500\">{error}</div>}\n          <button\n            disabled={loading}\n            className=\"rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600\"\n            onClick={handleVerify}\n          >\n            {loading ? (\n              <LoadingSpinner loadingText={\"Verifying...\"} />\n            ) : (\n              \"Verify\"\n            )}\n          </button>\n          <button\n            className=\"ml-4 rounded-lg bg-gray-300 px-4 py-2 text-gray-800 hover:bg-gray-400\"\n            onClick={() => {\n              navigate(\"/signup\");\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VerifyEmail;\n"],"names":["VerifyEmail","loading","setLoading","useState","navigate","useNavigate","location","useLocation","searchParams","URLSearchParams","search","codeFromUrl","get","emailFromUrl","email","state","code","setCode","error","setError","handleVerify","useCallback","verificationLink","concat","axios","then","res","status","catch","err","response","data","message","useEffect","_jsx","className","children","_jsxs","type","placeholder","value","onChange","e","target","disabled","onClick","LoadingSpinner","loadingText"],"sourceRoot":""}